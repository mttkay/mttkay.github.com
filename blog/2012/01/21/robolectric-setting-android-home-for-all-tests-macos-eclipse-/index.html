
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Robolectric: Setting ANDROID_HOME for all tests (MacOS/Eclipse) - androitism.</title>
  <meta name="author" content="Matthias Käppler">

  
  <meta name="description" content="I just stumbled over the somewhat annoying issue that when running Robolectric tests in Eclipse, the library must see the ANDROID_HOME environment &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mttkay.github.com/blog/2012/01/21/robolectric-setting-android-home-for-all-tests-macos-eclipse-/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="androitism." type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">androitism.</a></h1>
  
    <h2>Bits and bobs for the busy Android coder.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mttkay.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Robolectric: Setting ANDROID_HOME for All Tests (MacOS/Eclipse)</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-21T00:00:00+01:00" pubdate data-updated="true">Jan 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I just stumbled over the somewhat annoying issue that when running <a href="http://pivotal.github.com/robolectric/">Robolectric</a> tests in Eclipse, the library must see the ANDROID_HOME environment variable, or resource lookups in the android namespace will fail (you&#8217;ll see a warning about this on the console).</p>
<p>Now, you can of course fix that by adding ANDROID_HOME to every single Eclipse Run configuration for your tests, but that would be cumbersome. It would be better to have this variable set for Eclipse so that all Java processes forked from it will inherit it, including your test runs. Unfortunately MacOS X doesn&#8217;t seem to have a straight forward solution to that. I tried modifying Eclipse&#8217;s plist file, to define <a href="http://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/TP40009250-SW1">LSEnvironment</a>, but that did not have any effect.</p>
<p>However, what you can do is have all MacOS processes inherit it by <a href="http://www.digitaledgesw.com/node/31">setting it in /etc/launchd.conf</a>. This is somewhat quick and dirty, since you only really need it in Eclipse and Terminal, but it does the job:</p>
<div class="CodeRay">
  <div class="code"><pre>$sudo vim /etc/launchd.conf</pre></div>
</div>

<p>Now add this line:</p>
<div class="CodeRay">
  <div class="code"><pre>setenv ANDROID_HOME /path/to/android-sdk</pre></div>
</div>

<p>Reboot, and rejoice.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Matthias Käppler</span></span>

      








  


<time datetime="2012-01-21T00:00:00+01:00" pubdate data-updated="true">Jan 21<span>st</span>, 2012</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://mttkay.github.com/blog/2012/01/21/robolectric-setting-android-home-for-all-tests-macos-eclipse-/" data-via="" data-counturl="http://mttkay.github.com/blog/2012/01/21/robolectric-setting-android-home-for-all-tests-macos-eclipse-/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/01/11/which-screen-am-i-no-more-getting-lost-in-android-screen-configurations/" title="Previous Post: Which Screen Am I? No more getting lost in Android screen configurations">&laquo; Which Screen Am I? No more getting lost in Android screen configurations</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/01/27/the-signpost-oauth-project-has-an-owner-again-/" title="Next Post: The Signpost OAuth project has an owner again!">The Signpost OAuth project has an owner again! &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/31/use-android-s-id-notation-with-care/">Use Android's @+id Notation With Care</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/31/update-them-remotes-/">Update Them Remotes!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/21/unblock-us-manager-for-android-updated-with-region-switcher/">Unblock Us Manager for Android Updated With Region Switcher</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/14/unblock-us-manager-now-available-on-google-play/">Unblock-Us Manager Now Available On Google Play</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/18/why-the-google-tv-sdk-lacks-an-in-app-live-tv-widget/">Why the Google TV SDK lacks an in-app live TV widget</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Matthias Käppler -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
